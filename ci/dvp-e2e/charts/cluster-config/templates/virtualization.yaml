---
{{- if hasKey .Values "features" }}
{{- if .Values.features.virtualization }}
apiVersion: deckhouse.io/v1alpha1
kind: ModuleConfig
metadata:
  name: virtualization
spec:
  enabled: true
  settings:
    dvcr:
      storage:
        persistentVolumeClaim:
          size: 10Gi
        type: PersistentVolumeClaim
    virtualMachineCIDRs:
      - 192.168.10.0/24
  version: 1
---
apiVersion: deckhouse.io/v1alpha2
kind: ModulePullOverride
metadata:
  name: virtualization
spec:
  imageTag: {{ .Values.virtualization.tag }}
  scanInterval: 15s
{{- end }}
{{- end }}
