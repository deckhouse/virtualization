apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: virtualmachines.virtualization.deckhouse.io
  labels:
    heritage: deckhouse
    module: virtualization
spec:
  group: virtualization.deckhouse.io
  scope: Namespaced
  names:
    categories:
      - all
      - virtualization
    plural: virtualmachines
    singular: virtualmachine
    listKind: VirtualMachineList
    kind: VirtualMachine
    shortNames:
      - vm
      - vms
  preserveUnknownFields: false
  versions:
    - name: v1alpha2
      served: true
      storage: true
      schema:
        openAPIV3Schema:
          type: object
          description: |
            This resource describes the configuration and status of a virtual machine (VM).
            For a running VM, parameter changes can only be applied after the VM is rebooted, except for the following parameters (they are applied on the fly):
            - `.metadata.labels`.
            - `.metadata.annotations`.
            - `.spec.disruptions.restartApprovalMode`.
            - `.spec.disruptions.runPolicy`.
          required:
            - spec
          properties:
            spec:
              type: object
              required:
                - virtualMachineClassName
                - cpu
                - memory
                - blockDeviceRefs
              properties:
                provisioning:
                  description: |
                    This block allows you to configure the provisioning script for the VM.
                  type: object
                  properties:
                    type:
                      description: |
                        This parameter defines the type of provisioning script:

                        Parameters supported for using the provisioning script:

                        * UserData - use the cloud-init in the .spec.provisioning.UserData section.
                        * UserDataRef - use a cloud-init script that resides in a different resource.
                        * SysprepRef - Use a Windows Automation script that resides in a different resource.

                        More information: https://cloudinit.readthedocs.io/en/latest/reference/examples.html
                      type: string
                      enum:
                        - UserData
                        - UserDataRef
                        - SysprepRef
                    userData:
                      description: |
                        Inline cloud-init userdata script.
                      type: string
                    userDataRef:
                      description: |
                        A reference to an existing resource with a cloud-init script.

                        Resource structure for userDataRef type:

                        * `.data.userData`.
                      type: object
                      properties:
                        kind:
                          description: |
                            The kind of an existing cloud-init automation resource.
                          default: "Secret"
                          type: string
                          enum:
                            - Secret
                        name:
                          type: string
                          description: |
                            The name of the resource.
                      required: ["name", "kind"]
                    sysprepRef:
                      description: |
                        Reference to an existing Windows sysprep automation.

                        Resource structure for the SysprepRef type:

                        * `.data.autounattend.xml`.
                        * `.data.unattend.xml`.
                      type: object
                      properties:
                        kind:
                          description: |
                            The kind of an existing Windows sysprep automation resource.
                          default: "Secret"
                          type: string
                          enum:
                            - Secret
                        name:
                          type: string
                          description: |
                            Secret name.
                      required: ["kind", "name"]
                  oneOf:
                    - properties:
                        type:
                          enum: ["SysprepRef"]
                        sysprepRef: {}
                      required: ["sysprepRef"]
                      not:
                        anyOf:
                          - required: ["userData"]
                          - required: ["userDataRef"]
                    - properties:
                        type:
                          enum: ["UserData"]
                      required: ["userData"]
                      not:
                        anyOf:
                          - required: ["sysprepRef"]
                          - required: ["userDataRef"]
                    - properties:
                        type:
                          enum: ["UserDataRef"]
                        userDataRef: {}
                      required: ["userDataRef"]
                      not:
                        anyOf:
                          - required: ["sysprepRef"]
                          - required: ["userData"]
                runPolicy:
                  type: string
                  enum:
                    - "AlwaysOn"
                    - "AlwaysOff"
                    - "Manual"
                    - "AlwaysOnUnlessStoppedManually"
                  default: "AlwaysOnUnlessStoppedManually"
                  description: |
                    This parameter defines the VM startup policy

                    * `AlwaysOn` - after creation the VM is always in a running state, even in case of its shutdown by OS means.
                    * `AlwaysOff` - after creation the VM is always in the off state.
                    * `Manual` - after creation the VM is switched off, the VM state (switching on/off) is controlled via sub-resources or OS means.
                    * `AlwaysOnUnlessStoppedManually` - after creation the VM is always in a running state, even in case of its shutdown by means of the OS, the VM can be shut down using the corresponding subresource.

                virtualMachineIPAddressName:
                  type: string
                  description: |
                    Name for the associated `virtualMachineIPAddress` resource.

                    Specified when it is necessary to use a previously created IP address of the VM.

                    If not explicitly specified, by default a `virtualMachineIPAddress` resource is created for the VM with a name similar to the VM resource (`.metadata.name`).

                topologySpreadConstraints:
                  description: |
                    [The same](https://kubernetes.io/docs/concepts/scheduling-eviction/topology-spread-constraints/) as in the pods `spec.topologySpreadConstraints` parameter in Kubernetes;

                  items:
                    properties:
                      labelSelector:
                        description: ""
                        properties:
                          matchExpressions:
                            description: ""
                            items:
                              properties:
                                key:
                                  type: string
                                  description: ""
                                operator:
                                  type: string
                                  description: ""
                                values:
                                  items:
                                    type: string
                                    description: ""
                                  type: array
                                  description: ""
                              required:
                                - key
                                - operator
                              type: object
                            type: array
                          matchLabels:
                            description: ""
                            additionalProperties:
                              type: string
                              description: ""
                            type: object
                        type: object
                      maxSkew:
                        description: ""
                        format: int32
                        type: integer
                      topologyKey:
                        description: ""
                        type: string
                      whenUnsatisfiable:
                        description: ""
                        type: string
                    required:
                      - maxSkew
                      - topologyKey
                      - whenUnsatisfiable
                    type: object
                  type: array

                affinity:
                  description: |
                    [The same](https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#affinity-and-anti-affinity) as in the pods `spec.affinity` parameter in Kubernetes;

                    The affinity setting is completely similar to the above documentation, the only difference is in the names of some parameters. In fact, the following analogs are used:
                    * podAffinity -> virtualMachineAndPodAffinity
                    * podAffinityTerm -> virtualMachineAndPodAffinityTerm

                  properties:
                    nodeAffinity:
                      properties:
                        preferredDuringSchedulingIgnoredDuringExecution:
                          items:
                            properties:
                              preference:
                                properties:
                                  matchExpressions:
                                    items:
                                      properties:
                                        key:
                                          description: ""
                                          type: string
                                        operator:
                                          description: ""
                                          type: string
                                        values:
                                          items:
                                            description: ""
                                            type: string
                                          type: array
                                          description: ""
                                      required:
                                        - key
                                        - operator
                                      type: object
                                      description: ""
                                    type: array
                                    description: ""
                                  matchFields:
                                    items:
                                      properties:
                                        key:
                                          type: string
                                          description: ""
                                        operator:
                                          type: string
                                          description: ""
                                        values:
                                          items:
                                            type: string
                                            description: ""
                                          type: array
                                          description: ""
                                      required:
                                        - key
                                        - operator
                                      type: object
                                      description: ""
                                    type: array
                                    description: ""
                                type: object
                                description: ""
                              weight:
                                maximum: 100
                                minimum: 1
                                format: int32
                                type: integer
                                description: ""
                            required:
                              - preference
                              - weight
                            type: object
                            description: ""
                          type: array
                          description: ""
                        requiredDuringSchedulingIgnoredDuringExecution:
                          properties:
                            nodeSelectorTerms:
                              items:
                                properties:
                                  matchExpressions:
                                    items:
                                      properties:
                                        key:
                                          type: string
                                          description: ""
                                        operator:
                                          type: string
                                          description: ""
                                        values:
                                          items:
                                            type: string
                                            description: ""
                                          type: array
                                          description: ""
                                      required:
                                        - key
                                        - operator
                                      type: object
                                      description: ""
                                    type: array
                                    description: ""
                                  matchFields:
                                    items:
                                      properties:
                                        key:
                                          type: string
                                          description: ""
                                        operator:
                                          type: string
                                          description: ""
                                        values:
                                          items:
                                            type: string
                                            description: ""
                                          type: array
                                          description: ""
                                      required:
                                        - key
                                        - operator
                                      type: object
                                      description: ""
                                    type: array
                                    description: ""
                                type: object
                                description: ""
                              type: array
                              description: ""
                          required:
                            - nodeSelectorTerms
                          type: object
                          description: ""
                      type: object
                      description: Describes node affinity scheduling rules for the VM.
                    virtualMachineAndPodAffinity:
                      description: Describes pod and VM affinity scheduling rules.
                      properties:
                        preferredDuringSchedulingIgnoredDuringExecution:
                          items:
                            properties:
                              virtualMachineAndPodAffinityTerm:
                                properties:
                                  labelSelector:
                                    properties:
                                      matchExpressions:
                                        items:
                                          properties:
                                            key:
                                              type: string
                                              description: ""
                                            operator:
                                              type: string
                                              description: ""
                                            values:
                                              items:
                                                type: string
                                                description: ""
                                              type: array
                                              description: ""
                                          required:
                                            - key
                                            - operator
                                          type: object
                                          description: ""
                                        type: array
                                        description: ""
                                      matchLabels:
                                        additionalProperties:
                                          type: string
                                          description: ""
                                        type: object
                                        description: ""
                                    type: object
                                    description: ""
                                  namespaceSelector:
                                    properties:
                                      matchExpressions:
                                        items:
                                          properties:
                                            key:
                                              type: string
                                              description: ""
                                            operator:
                                              type: string
                                              description: ""
                                            values:
                                              items:
                                                type: string
                                                description: ""
                                              type: array
                                              description: ""
                                          required:
                                            - key
                                            - operator
                                          type: object
                                          description: ""
                                        type: array
                                        description: ""
                                      matchLabels:
                                        additionalProperties:
                                          type: string
                                          description: ""
                                        type: object
                                        description: ""
                                    type: object
                                    description: ""
                                  namespaces:
                                    items:
                                      type: string
                                      description: ""
                                    type: array
                                    description: ""
                                  topologyKey:
                                    type: string
                                    description: ""
                                  matchLabelKeys:
                                    items:
                                      type: string
                                      description: ""
                                    type: array
                                    description: ""
                                  mismatchLabelKeys:
                                    items:
                                      type: string
                                      description: ""
                                    type: array
                                    description: ""
                                required:
                                  - topologyKey
                                type: object
                                description: ""
                              weight:
                                maximum: 100
                                minimum: 1
                                format: int32
                                type: integer
                                description: ""
                            required:
                              - virtualMachineAndPodAffinityTerm
                              - weight
                            type: object
                            description: ""
                          type: array
                          description: ""
                        requiredDuringSchedulingIgnoredDuringExecution:
                          items:
                            properties:
                              labelSelector:
                                properties:
                                  matchExpressions:
                                    items:
                                      properties:
                                        key:
                                          type: string
                                          description: ""
                                        operator:
                                          type: string
                                          description: ""
                                        values:
                                          items:
                                            type: string
                                            description: ""
                                          type: array
                                          description: ""
                                      required:
                                        - key
                                        - operator
                                      type: object
                                      description: ""
                                    type: array
                                    description: ""
                                  matchLabels:
                                    additionalProperties:
                                      type: string
                                      description: ""
                                    type: object
                                    description: ""
                                type: object
                                description: ""
                              namespaceSelector:
                                properties:
                                  matchExpressions:
                                    items:
                                      properties:
                                        key:
                                          type: string
                                          description: ""
                                        operator:
                                          type: string
                                          description: ""
                                        values:
                                          items:
                                            type: string
                                            description: ""
                                          type: array
                                          description: ""
                                      required:
                                        - key
                                        - operator
                                      type: object
                                      description: ""
                                    type: array
                                    description: ""
                                  matchLabels:
                                    additionalProperties:
                                      type: string
                                      description: ""
                                    type: object
                                    description: ""
                                type: object
                                description: ""
                              namespaces:
                                items:
                                  type: string
                                  description: ""
                                type: array
                                description: ""
                              topologyKey:
                                type: string
                                description: ""
                              matchLabelKeys:
                                items:
                                  type: string
                                  description: ""
                                type: array
                                description: ""
                              mismatchLabelKeys:
                                items:
                                  type: string
                                  description: ""
                                type: array
                                description: ""
                            required:
                              - topologyKey
                            type: object
                            description: ""
                          type: array
                          description: ""
                      type: object
                    virtualMachineAndPodAntiAffinity:
                      description: Describes pod and VM anti-affinity scheduling rules.
                      properties:
                        preferredDuringSchedulingIgnoredDuringExecution:
                          items:
                            properties:
                              virtualMachineAndPodAffinityTerm:
                                properties:
                                  labelSelector:
                                    properties:
                                      matchExpressions:
                                        items:
                                          properties:
                                            key:
                                              type: string
                                              description: ""
                                            operator:
                                              type: string
                                              description: ""
                                            values:
                                              items:
                                                type: string
                                                description: ""
                                              type: array
                                              description: ""
                                          required:
                                            - key
                                            - operator
                                          type: object
                                          description: ""
                                        type: array
                                        description: ""
                                      matchLabels:
                                        additionalProperties:
                                          type: string
                                          description: ""
                                        type: object
                                        description: ""
                                    type: object
                                    description: ""
                                  namespaceSelector:
                                    properties:
                                      matchExpressions:
                                        items:
                                          properties:
                                            key:
                                              type: string
                                              description: ""
                                            operator:
                                              type: string
                                              description: ""
                                            values:
                                              items:
                                                type: string
                                                description: ""
                                              type: array
                                              description: ""
                                          required:
                                            - key
                                            - operator
                                          type: object
                                          description: ""
                                        type: array
                                        description: ""
                                      matchLabels:
                                        additionalProperties:
                                          type: string
                                          description: ""
                                        type: object
                                        description: ""
                                    type: object
                                    description: ""
                                  namespaces:
                                    items:
                                      type: string
                                      description: ""
                                    type: array
                                    description: ""
                                  topologyKey:
                                    type: string
                                    description: ""
                                  matchLabelKeys:
                                    items:
                                      type: string
                                      description: ""
                                    type: array
                                    description: ""
                                  mismatchLabelKeys:
                                    items:
                                      type: string
                                      description: ""
                                    type: array
                                    description: ""
                                required:
                                  - topologyKey
                                type: object
                                description: ""
                              weight:
                                maximum: 100
                                minimum: 1
                                format: int32
                                type: integer
                                description: ""
                            required:
                              - virtualMachineAndPodAffinityTerm
                              - weight
                            type: object
                            description: ""
                          type: array
                          description: ""
                        requiredDuringSchedulingIgnoredDuringExecution:
                          items:
                            properties:
                              labelSelector:
                                properties:
                                  matchExpressions:
                                    items:
                                      properties:
                                        key:
                                          type: string
                                          description: ""
                                        operator:
                                          type: string
                                          description: ""
                                        values:
                                          items:
                                            type: string
                                            description: ""
                                          type: array
                                          description: ""
                                      required:
                                        - key
                                        - operator
                                      type: object
                                      description: ""
                                    type: array
                                    description: ""
                                  matchLabels:
                                    additionalProperties:
                                      type: string
                                      description: ""
                                    type: object
                                    description: ""
                                type: object
                                description: ""
                              namespaceSelector:
                                properties:
                                  matchExpressions:
                                    items:
                                      properties:
                                        key:
                                          type: string
                                          description: ""
                                        operator:
                                          type: string
                                          description: ""
                                        values:
                                          items:
                                            type: string
                                            description: ""
                                          type: array
                                          description: ""
                                      required:
                                        - key
                                        - operator
                                      type: object
                                      description: ""
                                    type: array
                                    description: ""
                                  matchLabels:
                                    additionalProperties:
                                      type: string
                                      description: ""
                                    type: object
                                    description: ""
                                type: object
                                description: ""
                              namespaces:
                                items:
                                  type: string
                                  description: ""
                                type: array
                                description: ""
                              topologyKey:
                                type: string
                                description: ""
                              matchLabelKeys:
                                items:
                                  type: string
                                  description: ""
                                type: array
                                description: ""
                              mismatchLabelKeys:
                                items:
                                  type: string
                                  description: ""
                                type: array
                                description: ""
                            required:
                              - topologyKey
                            type: object
                            description: ""
                          type: array
                          description: ""
                      type: object
                  type: object

                nodeSelector:
                  additionalProperties:
                    type: string
                  description: |
                    [The same](https://kubernetes.io/docs/tasks/configure-pod-container/assign-pods-nodes//) as in the pods `spec.nodeSelector` parameter in Kubernetes;
                  type: object

                priorityClassName:
                  description: |
                    [The same](https://kubernetes.io/docs/concepts/scheduling-eviction/pod-priority-preemption/)  as in the pods `spec.priorityClassName` parameter in Kubernetes;
                  type: string

                tolerations:
                  type: array
                  description: |
                    [The same](https://kubernetes.io/docs/concepts/scheduling-eviction/taint-and-toleration/) as in the pods `spec.tolerations` parameter in Kubernetes;

                  items:
                    type: object
                    description: ""
                    properties:
                      effect:
                        type: string
                        description: ""
                      key:
                        type: string
                        description: ""
                      operator:
                        type: string
                        description: ""
                      tolerationSeconds:
                        type: integer
                        description: ""
                        format: int64
                      value:
                        type: string
                        description: ""

                disruptions:
                  type: object
                  default:
                    restartApprovalMode: Manual
                  description: |
                    Describing the policy for applying changes that require rebooting the VM.

                    Changes to some VM configuration settings require a reboot of the VM to apply them. This policy allows you to specify the behavior of how the VM will respond to such changes.
                  properties:
                    restartApprovalMode:
                      type: string
                      description: |
                        Approval mode for changes that require rebooting the VM:

                        * `Manual` - changes will not be applied until the user reboots the VM himself.
                        * `Automatic` - the VM will be rebooted immediately after saving the parameters that require rebooting the VM.
                      enum:
                        - Manual
                        - Automatic

                terminationGracePeriodSeconds:
                  format: int64
                  type: integer
                  default: 60
                  description: |
                    Grace period observed after signalling a VM to stop after which the VM is force terminated.

                enableParavirtualization:
                  type: boolean
                  default: true
                  description: |
                    Use the `virtio` bus to connect virtual devices of the VM. Set to false to disable `virtio` for this VM.

                    Note: To use paravirtualization mode, some operating systems require the appropriate drivers to be installed.

                osType:
                  type: string
                  enum:
                    - "Windows"
                    - "Generic"
                  default: "Generic"
                  description: |
                    The parameter allows you to select the type of used OS, for which a VM with an optimal set of required virtual devices and parameters will be created.

                    * Windows - for Microsoft Windows family operating systems.
                    * Generic - for other types of OS.

                bootloader:
                  type: string
                  enum:
                    - "BIOS"
                    - "EFI"
                    - "EFIWithSecureBoot"
                  default: "BIOS"
                  description: |
                    Defines bootloader for VM.
                    * BIOS - use legacy BIOS.
                    * EFI - use Unified Extensible Firmware (EFI/UEFI).
                    * EFIWithSecureBoot - use UEFI/EFI with SecureBoot support.
                virtualMachineClassName:
                  type: string
                  description: |
                    Name of the `VirtualMachineClass` resource describing the requirements for a virtual CPU, memory and the resource allocation policy and node placement policies for virtual machines.
                cpu:
                  type: object
                  description: Specifies the CPU settings for the VM.
                  required:
                    - cores
                  properties:
                    cores:
                      format: int32
                      type: integer
                      minimum: 1
                      description: Specifies the number of cores inside the VM. The value must be greater or equal 1.
                    coreFraction:
                      type: string
                      default: "100%"
                      enum: ["5%", "10%", "25%", "50%", "100%"]
                      description: |
                        Guaranteed share of CPU that will be allocated to the VM. Specified as a percentage.

                memory:
                  type: object
                  description: |
                    Specifies the memory settings for the VM.
                  required:
                    - size
                  properties:
                    size:
                      type: string
                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                      description: |
                        Describes the maximum amount of memory resources allowed.

                blockDeviceRefs:
                  type: array
                  minItems: 1
                  maxItems: 16
                  description: |
                    List of block devices that can be mounted by disks belonging to the virtual machine.
                    The order of booting is determined by the order in the list.
                  items:
                    type: object
                    description: |
                      The reference to block device.
                    properties:
                      kind:
                        type: string
                        description: |
                          The type of the block device. Options are:

                          * `ClusterVirtualImage` — Use `ClusterVirtualImage` as the disk. This type is always mounted in RO mode. If the image is an iso-image, it will be mounted as a CDROM device.
                          * `VirtualImage` — Use `VirtualImage` as the disk. This type is always mounted in RO mode. If the image is an iso-image, it will be mounted as a CDROM device.
                          * `VirtualDisk` — Use `VirtualDisk` as the disk. This type is always mounted in RW mode.
                        enum:
                          - "ClusterVirtualImage"
                          - "VirtualImage"
                          - "VirtualDisk"
                      name:
                        type: string
                        description: |
                          The name of attached resource.
            status:
              type: object
              properties:
                guestOSInfo:
                  type: object
                  x-kubernetes-preserve-unknown-fields: true
                  description: |
                    Guest OS information obtained from the QEMU Guest Agent. The agent must be pre-installed.

                    More information about the agent, you can read here: https://www.qemu.org/docs/master/interop/qemu-ga.html
                phase:
                  type: string
                  description: |
                    The current phase of the virtual machine:
                    * `Pending` - The process of starting the VM is in progress.
                    * `Running` - VM is running.
                    * `Degraded` - An error occurred during the startup process or while the VM is running.
                    * `Terminating` - The VM is currently in the process of shutting down.
                    * `Stopped` - The VM is stopped.
                  enum:
                    - "Pending"
                    - "Running"
                    - "Degraded"
                    - "Terminating"
                    - "Stopped"
                    - "Stopping"
                    - "Starting"
                    - "Migrating"
                    - "Pause"
                nodeName:
                  type: string
                  description: |
                    The name of the node on which the VM is currently running.
                virtualMachineIPAddressName:
                  type: string
                  description: |
                    Name of `virtualMachineIPAddressName` holding the ip address of the VirtualMachine.
                ipAddress:
                  type: string
                  description: |
                    IP address of VM.
                blockDeviceRefs:
                  type: array
                  description: |
                    The list of attached block device attachments.
                  items:
                    type: object
                    required: ["kind", "name", "size", "attached"]
                    properties:
                      attached:
                        type: boolean
                        description: |
                          The block device is attached to the virtual machine.
                      hotplugged:
                        type: boolean
                        description: |
                          Block device is attached via hot plug connection.
                      kind:
                        type: string
                        description: The type of block device.
                        enum:
                          - "ClusterVirtualImage"
                          - "VirtualImage"
                          - "VirtualDisk"
                      name:
                        type: string
                        description: |
                          The name of attached resource.
                      target:
                        type: string
                        description: The name of attached block device.
                        example: sda
                      size:
                        type: string
                        description: |
                          The size of attached block device.
                      virtualMachineBlockDeviceAttachmentName:
                        type: string
                        description: |
                          The name of the `VirtualMachineBlockDeviceAttachment` resource that defines hot plug disk connection to the virtual machine.
                migrationState:
                  type: object
                  description: "Migration info."
                  properties:
                    startTimestamp:
                      description: "Migration start time."
                      format: date-time
                      nullable: true
                      type: string
                    endTimestamp:
                      description: "Migration end time."
                      format: date-time
                      nullable: true
                      type: string
                    target:
                      description: ""
                      type: object
                      properties:
                        node:
                          description: "The name of the node on which the VM is currently migrating."
                          type: string
                        pod:
                          description: "The name of the pod where the VM is currently being migrated."
                          type: string
                    source:
                      description: ""
                      type: object
                      properties:
                        node:
                          description: "The name of the node where the VM is currently running."
                          type: string
                        pod:
                          description: "The name of the pod on which the VM is currently running."
                          type: string
                    result:
                      description: "Migration result."
                      type: string
                      enum:
                        - ""
                        - "Succeeded"
                        - "Failed"
                stats:
                  type: object
                  description: "VirtualMachine statistics"
                  properties:
                    phasesTransitions:
                      description: "The history of phases."
                      type: array
                      items:
                        type: object
                        properties:
                          phase:
                            description: "The phase of the virtual machine."
                            type: string
                            enum:
                              - "Pending"
                              - "Running"
                              - "Degraded"
                              - "Terminating"
                              - "Stopped"
                              - "Stopping"
                              - "Starting"
                              - "Migrating"
                              - "Pause"
                          timestamp:
                            description: "The time of transition to this phase."
                            format: date-time
                            nullable: true
                            type: string
                    launchTimeDuration:
                      description: "Launch information."
                      type: object
                      properties:
                        waitingForDependencies:
                          description: "The waiting time for dependent resources. pending -> starting."
                          nullable: true
                          type: string
                        virtualMachineStarting:
                          description: "The waiting time for the virtual machine to start. starting -> running."
                          nullable: true
                          type: string
                        guestOSAgentStarting:
                          description: "The waiting time for the guestOsAgent to start. running -> running with guestOSAgent"
                          nullable: true
                          type: string
                conditions:
                  description: |
                    Specific points in VM's runtime.
                  items:
                    properties:
                      lastProbeTime:
                        description: ""
                        format: date-time
                        nullable: true
                        type: string
                      lastTransitionTime:
                        description: ""
                        format: date-time
                        nullable: true
                        type: string
                      message:
                        description: "Extended message"
                        type: string
                      reason:
                        description: "brief reason"
                        type: string
                      status:
                        description: "The status of the condition. Possible values: `True`, `False`, `Unknown'."
                        type: string
                      type:
                        description: "The type of condition."
                        type: string
                      observedGeneration:
                        type: integer
                        description: "Generating a resource that was last processed by the controller"
                        format: int64
                    required:
                      - status
                      - type
                    type: object
                  type: array
                restartAwaitingChanges:
                  description: |
                    A list of changes require restart for applying.
                  type: array
                  items:
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                observedGeneration:
                  type: integer
                  description: "Generating a resource that was last processed by the controller"
                  format: int64
                virtualMachinePods:
                  description: List of virtual machine pods.
                  items:
                    properties:
                      active:
                        description: Current working pod.
                        type: boolean
                      name:
                        description: Name of virtual machine pod.
                        type: string
                    required:
                      - active
                      - name
                    type: object
                  type: array
                resources:
                  description: Resource utilization statistics.
                  properties:
                    cpu:
                      description:
                        CPU utilization statistics.
                        usage.
                      properties:
                        coreFraction:
                          description: Current CoreFraction.
                          type: string
                        cores:
                          description: The current number of cores in the virtual machine.
                          type: integer
                        requestedCores:
                          anyOf:
                            - type: integer
                            - type: string
                          description: Requested cores.
                          pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                          x-kubernetes-int-or-string: true
                        runtimeOverhead:
                          anyOf:
                            - type: integer
                            - type: string
                          description: Runtime overhead.
                          pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                          x-kubernetes-int-or-string: true
                      required:
                        - cores
                      type: object
                    memory:
                      description:
                        Memory utilization statistics.
                        resource usage.
                      properties:
                        runtimeOverhead:
                          anyOf:
                            - type: integer
                            - type: string
                          description: Memory runtime overhead.
                          pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                          x-kubernetes-int-or-string: true
                        size:
                          anyOf:
                            - type: integer
                            - type: string
                          description: Current memory size.
                          pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                          x-kubernetes-int-or-string: true
                      required:
                        - size
                      type: object
                  type: object
      additionalPrinterColumns:
        - description: The phase of the virtual machine.
          jsonPath: .status.phase
          name: Phase
          type: string
        - description: The number of cores of the virtual machine.
          jsonPath: .spec.cpu.cores
          name: Cores
          priority: 1
          type: string
        - description: Virtual machine core fraction.
          jsonPath: .spec.cpu.coreFraction
          name: CoreFraction
          priority: 1
          type: string
        - description: The amount of memory of the virtual machine.
          jsonPath: .spec.memory.size
          name: Memory
          priority: 1
          type: string
        - description: A restart of the virtual machine is required.
          jsonPath: .status.conditions[?(@.type=='AwaitingRestartToApplyConfiguration')].status
          name: Need restart
          priority: 1
          type: string
        - description: Agent status.
          jsonPath: .status.conditions[?(@.type=='AgentReady')].status
          name: Agent
          priority: 1
          type: string
        - description: Is it possible to migrate a virtual machine.
          jsonPath: .status.conditions[?(@.type=='Migratable')].status
          name: Migratable
          priority: 1
          type: string
        - description: The node where the virtual machine is running.
          jsonPath: .status.nodeName
          name: Node
          type: string
        - description: The IP address of the virtual machine.
          jsonPath: .status.ipAddress
          name: IPAddress
          type: string
        - description: Time of creation resource.
          jsonPath: .metadata.creationTimestamp
          name: Age
          type: date
      subresources:
        status: {}
