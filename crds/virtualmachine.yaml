apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: virtualmachines.virtualization.deckhouse.io
  labels:
    heritage: deckhouse
    module: virtualization
spec:
  group: virtualization.deckhouse.io
  scope: Namespaced
  names:
    categories:
      - all
      - virtualization
    plural: virtualmachines
    singular: virtualmachine
    listKind: VirtualMachineList
    kind: VirtualMachine
    shortNames:
      - vm
      - vms
  preserveUnknownFields: false
  versions:
    - name: v1alpha2
      served: true
      storage: true
      schema:
        openAPIV3Schema:
          type: object
          description: |
            Handles the VM according to its configuration and run policy.
          required:
            - spec
          properties:
            spec:
              type: object
              required:
                - cpu
                - memory
                - blockDevices
              properties:
                provisioning:
                  description: |
                    This block allows you to configure the provisioning script for the VM.
                  type: object
                  properties:
                    type:
                      description: |
                        This parameter defines the type of provisioning script:

                        * SysprepSecret - allows to automate Windows installation, setup, and custom software provisioning.

                        * UserData - allows the use of inline cloud-init userdata in the .spec.provisioning.UserData section.

                        * UserDataSecret - allows the use of an existing Secret with cloud-init userdata.

                        More information: https://cloudinit.readthedocs.io/en/latest/reference/examples.html
                      type: string
                      enum:
                        - SysprepSecret
                        - UserData
                        - UserDataSecret
                    sysprepSecretRef:
                      description: |
                        Reference to an existing Secret with a Windows sysprep automation.
                      type: object
                      properties:
                        name:
                          type: string
                          description: |
                            Secret name.
                      required: ["name"]
                    userData:
                      description: |
                        Inline cloud-init userdata script.
                      type: string
                    userDataSecretRef:
                      description: |
                        Reference to an existing Secret with a cloud-init userdata script.
                      type: object
                      properties:
                        name:
                          type: string
                          description: |
                            Secret name.
                      required: ["name"]
                  oneOf:
                    - properties:
                        type:
                          enum: ["SysprepSecret"]
                      required: ["sysprepSecretRef"]
                      not:
                        anyOf:
                          - required: ["userData"]
                          - required: ["userDataSecretRef"]
                    - properties:
                        type:
                          enum: ["UserData"]
                      required: ["userData"]
                      not:
                        anyOf:
                          - required: ["sysprepSecretRef"]
                          - required: ["userDataSecretRef"]
                    - properties:
                        type:
                          enum: ["UserDataSecret"]
                        userDataSecretRef: {}
                      required: ["userDataSecretRef"]
                      not:
                        anyOf:
                          - required: ["sysprepSecretRef"]
                          - required: ["userData"]
                runPolicy:
                  type: string
                  enum:
                    - "AlwaysOn"
                    - "AlwaysOff"
                    - "Manual"
                    - "AlwaysOnUnlessStoppedManualy"
                  default: "AlwaysOnUnlessStoppedManualy"
                  description: |
                    This parameter defines the VM startup policy

                    * `AlwaysOn` - after creation the VM is always in a running state, even in case of its shutdown by OS means.
                    * `AlwaysOff` - after creation the VM is always in the off state.
                    * `Manual` - after creation the VM is switched off, the VM state (switching on/off) is controlled via sub-resources or OS means.
                    * `AlwaysOnUnlessStoppedManualy` - after creation the VM is always in a running state, even in case of its shutdown by means of the OS, the VM can be shut down using the corresponding subresource.

                virtualMachineIPAddressClaimName:
                  type: string
                  description: |
                    The name for associated `VirtualMachineIPAddressClaim` resource.

                    If specified, VirtualMachineIPAddressClaim should exists on VirtualMachine creation.
                    If not specified, a VirtualMachine name will be used to create an implicit VirtualMachineIPAddressClaim. This claim will be deleted on VirtualMachine deletion.

                topologySpreadConstraints:
                  description: |
                    [The same](https://kubernetes.io/docs/concepts/scheduling-eviction/topology-spread-constraints/) as in the pods `spec.topologySpreadConstraints` parameter in Kubernetes;

                  items:
                    properties:
                      labelSelector:
                        description: ""
                        properties:
                          matchExpressions:
                            description: ""
                            items:
                              properties:
                                key:
                                  type: string
                                  description: ""
                                operator:
                                  type: string
                                  description: ""
                                values:
                                  items:
                                    type: string
                                    description: ""
                                  type: array
                                  description: ""
                              required:
                                - key
                                - operator
                              type: object
                            type: array
                          matchLabels:
                            description: ""
                            additionalProperties:
                              type: string
                              description: ""
                            type: object
                        type: object
                      maxSkew:
                        description: ""
                        format: int32
                        type: integer
                      topologyKey:
                        description: ""
                        type: string
                      whenUnsatisfiable:
                        description: ""
                        type: string
                    required:
                      - maxSkew
                      - topologyKey
                      - whenUnsatisfiable
                    type: object
                  type: array

                affinity:
                  description: |
                    [The same](https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node/#affinity-and-anti-affinity) as in the pods `spec.affinity` parameter in Kubernetes;

                    The affinity setting is completely similar to the above documentation, the only difference is in the names of some parameters. In fact, the following analogs are used:
                    * podAffinity -> virtualMachineAndPodAffinity
                    * podAffinityTerm -> virtualMachineAndPodAffinityTerm

                  properties:
                    nodeAffinity:
                      properties:
                        preferredDuringSchedulingIgnoredDuringExecution:
                          items:
                            properties:
                              preference:
                                properties:
                                  matchExpressions:
                                    items:
                                      properties:
                                        key:
                                          description: ""
                                          type: string
                                        operator:
                                          description: ""
                                          type: string
                                        values:
                                          items:
                                            description: ""
                                            type: string
                                          type: array
                                          description: ""
                                      required:
                                        - key
                                        - operator
                                      type: object
                                      description: ""
                                    type: array
                                    description: ""
                                  matchFields:
                                    items:
                                      properties:
                                        key:
                                          type: string
                                          description: ""
                                        operator:
                                          type: string
                                          description: ""
                                        values:
                                          items:
                                            type: string
                                            description: ""
                                          type: array
                                          description: ""
                                      required:
                                        - key
                                        - operator
                                      type: object
                                      description: ""
                                    type: array
                                    description: ""
                                type: object
                                description: ""
                              weight:
                                maximum: 100
                                minimum: 1
                                format: int32
                                type: integer
                                description: ""
                            required:
                              - preference
                              - weight
                            type: object
                            description: ""
                          type: array
                          description: ""
                        requiredDuringSchedulingIgnoredDuringExecution:
                          properties:
                            nodeSelectorTerms:
                              items:
                                properties:
                                  matchExpressions:
                                    items:
                                      properties:
                                        key:
                                          type: string
                                          description: ""
                                        operator:
                                          type: string
                                          description: ""
                                        values:
                                          items:
                                            type: string
                                            description: ""
                                          type: array
                                          description: ""
                                      required:
                                        - key
                                        - operator
                                      type: object
                                      description: ""
                                    type: array
                                    description: ""
                                  matchFields:
                                    items:
                                      properties:
                                        key:
                                          type: string
                                          description: ""
                                        operator:
                                          type: string
                                          description: ""
                                        values:
                                          items:
                                            type: string
                                            description: ""
                                          type: array
                                          description: ""
                                      required:
                                        - key
                                        - operator
                                      type: object
                                      description: ""
                                    type: array
                                    description: ""
                                type: object
                                description: ""
                              type: array
                              description: ""
                          required:
                            - nodeSelectorTerms
                          type: object
                          description: ""
                      type: object
                      description: Describes node affinity scheduling rules for the VM.
                    virtualMachineAndPodAffinity:
                      description: Describes pod and VM affinity scheduling rules.
                      properties:
                        preferredDuringSchedulingIgnoredDuringExecution:
                          items:
                            properties:
                              virtualMachineAndPodAffinityTerm:
                                properties:
                                  labelSelector:
                                    properties:
                                      matchExpressions:
                                        items:
                                          properties:
                                            key:
                                              type: string
                                              description: ""
                                            operator:
                                              type: string
                                              description: ""
                                            values:
                                              items:
                                                type: string
                                                description: ""
                                              type: array
                                              description: ""
                                          required:
                                            - key
                                            - operator
                                          type: object
                                          description: ""
                                        type: array
                                        description: ""
                                      matchLabels:
                                        additionalProperties:
                                          type: string
                                          description: ""
                                        type: object
                                        description: ""
                                    type: object
                                    description: ""
                                  namespaceSelector:
                                    properties:
                                      matchExpressions:
                                        items:
                                          properties:
                                            key:
                                              type: string
                                              description: ""
                                            operator:
                                              type: string
                                              description: ""
                                            values:
                                              items:
                                                type: string
                                                description: ""
                                              type: array
                                              description: ""
                                          required:
                                            - key
                                            - operator
                                          type: object
                                          description: ""
                                        type: array
                                        description: ""
                                      matchLabels:
                                        additionalProperties:
                                          type: string
                                          description: ""
                                        type: object
                                        description: ""
                                    type: object
                                    description: ""
                                  namespaces:
                                    items:
                                      type: string
                                      description: ""
                                    type: array
                                    description: ""
                                  topologyKey:
                                    type: string
                                    description: ""
                                  matchLabelKeys:
                                    items:
                                      type: string
                                      description: ""
                                    type: array
                                    description: ""
                                  mismatchLabelKeys:
                                    items:
                                      type: string
                                      description: ""
                                    type: array
                                    description: ""
                                required:
                                  - topologyKey
                                type: object
                                description: ""
                              weight:
                                maximum: 100
                                minimum: 1
                                format: int32
                                type: integer
                                description: ""
                            required:
                              - virtualMachineAndPodAffinityTerm
                              - weight
                            type: object
                            description: ""
                          type: array
                          description: ""
                        requiredDuringSchedulingIgnoredDuringExecution:
                          items:
                            properties:
                              labelSelector:
                                properties:
                                  matchExpressions:
                                    items:
                                      properties:
                                        key:
                                          type: string
                                          description: ""
                                        operator:
                                          type: string
                                          description: ""
                                        values:
                                          items:
                                            type: string
                                            description: ""
                                          type: array
                                          description: ""
                                      required:
                                        - key
                                        - operator
                                      type: object
                                      description: ""
                                    type: array
                                    description: ""
                                  matchLabels:
                                    additionalProperties:
                                      type: string
                                      description: ""
                                    type: object
                                    description: ""
                                type: object
                                description: ""
                              namespaceSelector:
                                properties:
                                  matchExpressions:
                                    items:
                                      properties:
                                        key:
                                          type: string
                                          description: ""
                                        operator:
                                          type: string
                                          description: ""
                                        values:
                                          items:
                                            type: string
                                            description: ""
                                          type: array
                                          description: ""
                                      required:
                                        - key
                                        - operator
                                      type: object
                                      description: ""
                                    type: array
                                    description: ""
                                  matchLabels:
                                    additionalProperties:
                                      type: string
                                      description: ""
                                    type: object
                                    description: ""
                                type: object
                                description: ""
                              namespaces:
                                items:
                                  type: string
                                  description: ""
                                type: array
                                description: ""
                              topologyKey:
                                type: string
                                description: ""
                              matchLabelKeys:
                                items:
                                  type: string
                                  description: ""
                                type: array
                                description: ""
                              mismatchLabelKeys:
                                items:
                                  type: string
                                  description: ""
                                type: array
                                description: ""
                            required:
                              - topologyKey
                            type: object
                            description: ""
                          type: array
                          description: ""
                      type: object
                    virtualMachineAndPodAntiAffinity:
                      description: Describes pod and VM anti-affinity scheduling rules.
                      properties:
                        preferredDuringSchedulingIgnoredDuringExecution:
                          items:
                            properties:
                              virtualMachineAndPodAffinityTerm:
                                properties:
                                  labelSelector:
                                    properties:
                                      matchExpressions:
                                        items:
                                          properties:
                                            key:
                                              type: string
                                              description: ""
                                            operator:
                                              type: string
                                              description: ""
                                            values:
                                              items:
                                                type: string
                                                description: ""
                                              type: array
                                              description: ""
                                          required:
                                            - key
                                            - operator
                                          type: object
                                          description: ""
                                        type: array
                                        description: ""
                                      matchLabels:
                                        additionalProperties:
                                          type: string
                                          description: ""
                                        type: object
                                        description: ""
                                    type: object
                                    description: ""
                                  namespaceSelector:
                                    properties:
                                      matchExpressions:
                                        items:
                                          properties:
                                            key:
                                              type: string
                                              description: ""
                                            operator:
                                              type: string
                                              description: ""
                                            values:
                                              items:
                                                type: string
                                                description: ""
                                              type: array
                                              description: ""
                                          required:
                                            - key
                                            - operator
                                          type: object
                                          description: ""
                                        type: array
                                        description: ""
                                      matchLabels:
                                        additionalProperties:
                                          type: string
                                          description: ""
                                        type: object
                                        description: ""
                                    type: object
                                    description: ""
                                  namespaces:
                                    items:
                                      type: string
                                      description: ""
                                    type: array
                                    description: ""
                                  topologyKey:
                                    type: string
                                    description: ""
                                  matchLabelKeys:
                                    items:
                                      type: string
                                      description: ""
                                    type: array
                                    description: ""
                                  mismatchLabelKeys:
                                    items:
                                      type: string
                                      description: ""
                                    type: array
                                    description: ""
                                required:
                                  - topologyKey
                                type: object
                                description: ""
                              weight:
                                maximum: 100
                                minimum: 1
                                format: int32
                                type: integer
                                description: ""
                            required:
                              - virtualMachineAndPodAffinityTerm
                              - weight
                            type: object
                            description: ""
                          type: array
                          description: ""
                        requiredDuringSchedulingIgnoredDuringExecution:
                          items:
                            properties:
                              labelSelector:
                                properties:
                                  matchExpressions:
                                    items:
                                      properties:
                                        key:
                                          type: string
                                          description: ""
                                        operator:
                                          type: string
                                          description: ""
                                        values:
                                          items:
                                            type: string
                                            description: ""
                                          type: array
                                          description: ""
                                      required:
                                        - key
                                        - operator
                                      type: object
                                      description: ""
                                    type: array
                                    description: ""
                                  matchLabels:
                                    additionalProperties:
                                      type: string
                                      description: ""
                                    type: object
                                    description: ""
                                type: object
                                description: ""
                              namespaceSelector:
                                properties:
                                  matchExpressions:
                                    items:
                                      properties:
                                        key:
                                          type: string
                                          description: ""
                                        operator:
                                          type: string
                                          description: ""
                                        values:
                                          items:
                                            type: string
                                            description: ""
                                          type: array
                                          description: ""
                                      required:
                                        - key
                                        - operator
                                      type: object
                                      description: ""
                                    type: array
                                    description: ""
                                  matchLabels:
                                    additionalProperties:
                                      type: string
                                      description: ""
                                    type: object
                                    description: ""
                                type: object
                                description: ""
                              namespaces:
                                items:
                                  type: string
                                  description: ""
                                type: array
                                description: ""
                              topologyKey:
                                type: string
                                description: ""
                              matchLabelKeys:
                                items:
                                  type: string
                                  description: ""
                                type: array
                                description: ""
                              mismatchLabelKeys:
                                items:
                                  type: string
                                  description: ""
                                type: array
                                description: ""
                            required:
                              - topologyKey
                            type: object
                            description: ""
                          type: array
                          description: ""
                      type: object
                  type: object

                nodeSelector:
                  additionalProperties:
                    type: string
                  description: |
                    [The same](https://kubernetes.io/docs/tasks/configure-pod-container/assign-pods-nodes//) as in the pods `spec.nodeSelector` parameter in Kubernetes;
                  type: object

                priorityClassName:
                  description: |
                    [The same](https://kubernetes.io/docs/concepts/scheduling-eviction/pod-priority-preemption/)  as in the pods `spec.priorityClassName` parameter in Kubernetes;
                  type: string

                tolerations:
                  type: array
                  description: |
                    [The same](https://kubernetes.io/docs/concepts/scheduling-eviction/taint-and-toleration/) as in the pods `spec.tolerations` parameter in Kubernetes;

                  items:
                    type: object
                    description: ""
                    properties:
                      effect:
                        type: string
                        description: ""
                      key:
                        type: string
                        description: ""
                      operator:
                        type: string
                        description: ""
                      tolerationSeconds:
                        type: integer
                        description: ""
                        format: int64
                      value:
                        type: string
                        description: ""

                disruptions:
                  type: object
                  default:
                    restartApprovalMode: Manual
                  description: |
                    Disruptions settings for VM.

                    Some VM settings require a reboot of the VM when changing the configuration. To reboot, it is necessary to approve the changes. The `approvalMode` parameter is used for this purpose.
                  properties:
                    restartApprovalMode:
                      type: string
                      description: |
                        The approval mode for disruptive updates:
                        - `Manual` — to approve restart, you must do this manually by copying the restart ID from `.status.restartID` to `.spec.restartApprovalID`.
                        - `Automatic` —  automatically approve disruption-involving updates.
                      enum:
                        - Manual
                        - Automatic

                terminationGracePeriodSeconds:
                  format: int64
                  type: integer
                  default: 60
                  description: |
                    Grace period observed after signalling a VM to stop after which the VM is force terminated.

                enableParavirtualization:
                  type: boolean
                  default: true
                  description: |
                    Use the `virtio` bus to attach disk devices. Set to false to disable `virtio` for this VM.

                osType:
                  type: string
                  enum:
                    - "Windows"
                    - "Generic"
                  default: "Generic"
                  description: |
                    For the selected type of operating system, determines the set of devices and other parameters required for correct operation will be applied to VM.

                    * Windows - for the Microsoft Windows family of OS.
                    * Generic - for other types of OS.

                bootloader:
                  type: string
                  enum:
                    - "BIOS"
                    - "EFI"
                    - "EFIWithSecureBoot"
                  default: "BIOS"
                  description: |
                    Defines bootloader for VM.
                    * BIOS - use legacy BIOS.
                    * EFI - use Unified Extensible Firmware (EFI/UEFI).
                    * EFIWithSecureBoot - use UEFI/EFI with SecureBoot support.

                cpu:
                  type: object
                  description: Specifies the CPU settings for the VM.
                  required:
                    - cores
                  properties:
                    modelName:
                      type: string
                      default: "generic-v1"
                      description: |
                        Name of `VirtualMachineCPUModel` resource holding the CPU model of the VirtualMachine.
                    cores:
                      format: int32
                      type: integer
                      minimum: 1
                      description: Specifies the number of cores inside the VM. The value must be greater or equal 1.
                    coreFraction:
                      type: string
                      default: "100%"
                      enum: ["5%", "10%", "25%", "50%", "100%"]
                      description: |
                        Guaranteed share of CPU that will be allocated to the VM. Specified as a percentage.
                        Supported values: `5%`, `10%`, `25%`, `50%`, `100%`.

                memory:
                  type: object
                  description: |
                    Specifies the memory settings for the VM.
                  required:
                    - size
                  properties:
                    size:
                      type: string
                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                      description: |
                        Describes the maximum amount of memory resources allowed.

                blockDevices:
                  type: array
                  description: |
                    List of block devices that can be mounted by disks belonging to the VM.
                    The order of booting is determined by the order in the list.
                  items:
                    type: object
                    properties:
                      type:
                        type: string
                        enum:
                          - "ClusterVirtualMachineImage"
                          - "VirtualMachineImage"
                          - "VirtualMachineDisk"
                        description: |
                          The type of the block device. Options are:

                          * `ClusterVirtualMachineImage` — Use `ClusterVirtualMachineImage` as the disk. This type is always mounted in RO mode. If the image is an iso-image, it will be mounted as a CDROM device.
                          * `VirtualMachineImage` — Use `VirtualMachineImage` as the disk. This type is always mounted in RO mode. If the image is an iso-image, it will be mounted as a CDROM device.
                          * `VirtualMachineDisk` — Use `VirtualMachineDisk` as the disk. This type is always mounted in RW mode.
                      clusterVirtualMachineImage:
                        type: object
                        description: |
                          Attach `ClusterVirtualMachineImage` as the disk in RO mode. If the image is an iso-image, it will be mounted as a CDROM device.
                        required:
                          - name
                        properties:
                          name:
                            type: string
                            description: |
                              The name of the `ClusterVirtualMachineImage` resource.
                      virtualMachineImage:
                        type: object
                        description: |
                          Use `VirtualMachineImage` as the disk. The image with storage ContainerRegistry will be mounted in RO mode. If the image is an iso-image, it will be mounted as a CDROM device. The image with storage Kubernetes will be mounted as ephemeral disk, so changes to volume will be lost on reboot.
                        required:
                          - name
                        properties:
                          name:
                            type: string
                            description: |
                              The name of the `VirtualMachineImage` resource.
                      virtualMachineDisk:
                        type: object
                        description: |
                          Attach `VirtualMachineDisk` as the disk device in RW mode.
                        required:
                          - name
                        properties:
                          name:
                            type: string
                            description: |
                              The name of the `VirtualMachineDisk` resource.
                    oneOf:
                      - properties:
                          type:
                            enum: ["ClusterVirtualMachineImage"]
                          clusterVirtualMachineImage: {}
                        required: ["clusterVirtualMachineImage"]
                        not:
                          anyOf:
                            - required: ["virtualMachineImage"]
                            - required: ["virtualMachineDisk"]
                      - properties:
                          type:
                            enum: ["VirtualMachineImage"]
                          virtualMachineImage: {}
                        required: ["virtualMachineImage"]
                        not:
                          anyOf:
                            - required: ["clusterVirtualMachineImage"]
                            - required: ["virtualMachineDisk"]
                      - properties:
                          type:
                            enum: ["VirtualMachineDisk"]
                          virtualMachineDisk: {}
                        required: ["virtualMachineDisk"]
                        not:
                          anyOf:
                            - required: ["virtualMachineImage"]
                            - required: ["clusterVirtualMachineImage"]
                restartApprovalID:
                  type: string
                  description: |
                    Hash of virtual machine changes from .status.restartID.
                    Required to approve restart for applying disruptive changes.
            status:
              type: object
              properties:
                guestOSInfo:
                  type: object
                  description: |
                    Guest OS information obtained from the QEMU Guest Agent. The agent must be pre-installed.

                    More information about the agent, you can read here: https://www.qemu.org/docs/master/interop/qemu-ga.html
                phase:
                  type: string
                  description: |
                    The current phase of the virtual machine:

                    * `Scheduling` - The VM is scheduled for placement on cluster nodes.
                    * `Pending` - The process of starting the VM is in progress.
                    * `Running` - VM is running.
                    * `Failed` - An error occurred during the startup process or while the VM is running.
                    * `Terminating` - The VM is currently in the process of shutting down.
                    * `Stopped` - The VM is stopped.
                  enum:
                    - "Scheduling"
                    - "Pending"
                    - "Running"
                    - "Failed"
                    - "Terminating"
                    - "Stopped"
                    - "Stopping"
                    - "Starting"
                    - "Migrating"
                    - "Pause"
                nodeName:
                  type: string
                  description: |
                    The name of the node on which the VM is currently running.
                ipAddressClaim:
                  type: string
                  description: |
                    Name of `VirtualMachineIPAddressClaim` holding the ip address of the VirtualMachine.
                ipAddress:
                  type: string
                  description: |
                    IP address of VM.
                blockDevicesAttached:
                  type: array
                  description: |
                    The list of attached block devices.
                  items:
                    type: object
                    required: ["type", "size"]
                    oneOf:
                      - properties:
                          type:
                            enum: ["ClusterVirtualMachineImage"]
                          clusterVirtualMachineImage: {}
                        required: ["clusterVirtualMachineImage"]
                        not:
                          anyOf:
                            - required: ["virtualMachineImage"]
                            - required: ["virtualMachineDisk"]
                      - properties:
                          type:
                            enum: ["VirtualMachineImage"]
                          virtualMachineImage: {}
                        required: ["virtualMachineImage"]
                        not:
                          anyOf:
                            - required: ["clusterVirtualMachineImage"]
                            - required: ["virtualMachineDisk"]
                      - properties:
                          type:
                            enum: ["VirtualMachineDisk"]
                          virtualMachineDisk: {}
                        required: ["virtualMachineDisk"]
                        not:
                          anyOf:
                            - required: ["virtualMachineImage"]
                            - required: ["clusterVirtualMachineImage"]
                    properties:
                      hotpluggable:
                        type: boolean
                        description: |
                          Block device is available for hot plug.
                      type:
                        type: string
                        description: The type of block device.
                        enum:
                          - "ClusterVirtualMachineImage"
                          - "VirtualMachineImage"
                          - "VirtualMachineDisk"
                      clusterVirtualMachineImage:
                        type: object
                        properties:
                          name:
                            type: string
                            description: |
                              The name of `ClusterVirtualMachineImage` resource.
                      virtualMachineImage:
                        type: object
                        properties:
                          name:
                            type: string
                            description: |
                              The name of `VirtualMachineImage` resource.
                      virtualMachineDisk:
                        type: object
                        properties:
                          name:
                            type: string
                            description: |
                              The name of `VirtualMachineDisk` resource.
                      target:
                        type: string
                        description: The name of attached block device.
                        example: sda
                      size:
                        type: string
                        description: |
                          The size of attached block device.
                conditions:
                  description: |
                    Specific points in VM's runtime.
                  items:
                    properties:
                      lastProbeTime:
                        description: ""
                        format: date-time
                        nullable: true
                        type: string
                      lastTransitionTime:
                        description: ""
                        format: date-time
                        nullable: true
                        type: string
                      message:
                        description: ""
                        type: string
                      reason:
                        description: ""
                        type: string
                      status:
                        description: ""
                        type: string
                      type:
                        description: ""
                        type: string
                    required:
                      - status
                      - type
                    type: object
                  type: array
                message:
                  type: string
                  description: |
                    Detailed description of the VM state.
                restartID:
                  type: string
                  description: |
                    Hash of virtual machine changes. Use spec.restartApprovalID to approve disruptive changes, e.g. restart.
                restartAwaitingChanges:
                  description: |
                    A list of changes require restart for applying.
                  type: array
                  items:
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
      additionalPrinterColumns:
        - name: Phase
          type: string
          jsonPath: .status.phase
        - name: NodeName
          type: string
          jsonPath: .status.nodeName
        - name: IPAddress
          type: string
          jsonPath: .status.ipAddress
        - name: Age
          type: date
          jsonPath: .metadata.creationTimestamp
      subresources:
        status: {}
