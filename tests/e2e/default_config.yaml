namespaceSuffix: "end-to-end"

clusterTransport:
  kubeConfig: ""
  token: ""
  endpoint: ""
  insecureTls: true
  certificateAuthority: ""

disks:
  uploadHelperImage: "cr.yandex/crpvs5j3nh1mi2tpithr/e2e/alpine/curl-alpine-image"
  cviTestDataDir: "./testdata/cvi"
  viTestDataDir: "./testdata/vi"
  vdTestDataDir: "./testdata/vd"
vm:
  testDataDir: "./testdata/vm"
ipam:
  testDataDir: "./testdata/ipam"
helperImages:
  curlImage: "curlimages/curl"
testData:
  affinityToleration: "/tmp/testdata/affinity-toleration"
  complexTest: "/tmp/testdata/complex-test"
  connectivity: "/tmp/testdata/connectivity"
  diskResizing: "/tmp/testdata/disk-resizing"
  imageHotplug: "/tmp/testdata/image-hotplug"
  sizingPolicy: "/tmp/testdata/sizing-policy"
  imagesCreation: "/tmp/testdata/images-creation"
  importerNetworkPolicy: "/tmp/testdata/importer-network-policy"
  vmConfiguration: "/tmp/testdata/vm-configuration"
  vmLabelAnnotation: "/tmp/testdata/vm-label-annotation"
  vmMigration: "/tmp/testdata/vm-migration"
  vmMigrationCancel: "/tmp/testdata/vm-migration-cancel"
  vmEvacuation: "/tmp/testdata/vm-evacuation"
  vmDiskAttachment: "/tmp/testdata/vm-disk-attachment"
  vmRestoreForce: "/tmp/testdata/vm-restore-force"
  vmRestoreSafe: "/tmp/testdata/vm-restore-safe"
  vmVersions: "/tmp/testdata/vm-versions"
  vdSnapshots: "/tmp/testdata/vd-snapshots"
  ipam: "/tmp/testdata/ipam"
  sshKey: "/tmp/testdata/sshkeys/id_ed"
  sshUser: "cloud"
  vmVpc: "/tmp/testdata/vm-vpc"
logFilter:
  - "pattern to exclude"
  - "validation failed for data source objectref" # Err.
  - "clean up failed for data source registry" # Err.
  - "the server rejected our request due to an error in our request" # Err.
  - "failed to sync powerstate" # Msg.
  - "does not have a pvc reference" # "err": "kvvm head-345e7b6a-testcases-image-hotplug/head-345e7b6a-vm-image-hotplug spec volume vi-head-345e7b6a-vi-alpine-http does not have a pvc reference"
  - "lastTransitionTime: Required value" # Err.
  - "virtualmachineipaddressleases.virtualization.deckhouse.io "
  - "Forbidden: no new finalizers can be added if the object is being deleted, found new finalizers"
  - "Failed to watch" # error if virtualization-controller restarts during tests. "msg": "Failed to watch", "err": "Get \"http://127.0.0.1:23915/apis/virtualization.deckhouse.io/v1alpha2/virtualmachinerestores?allowWatchBookmarks=true\u0026resourceVersion=709816257\u0026timeoutSeconds=310\u0026watch=true\": context canceled"
  - "leader election lost"
regexpLogFilter:
  - "failed to detach: .* not found" # "err" "failed to detach: virtualmachine.kubevirt.io \"head-497d17b-vm-automatic-with-hotplug\" not found",
  - "error patching .* not found" # "err" "error patching *** virtualimages.virtualization.deckhouse.io \"head-497d17b-vi-pvc-oref-vi-oref-vd\" not found",
  - "IP address .* is not among addresses assigned to 'default' network interface .*" # "msg": "IP address (10.66.10.61) is not among addresses assigned to 'default' network interface (10.66.10.60)"
  - "failed to get vmSnapshot: VirtualMachineSnapshot\\.virtualization\\.deckhouse.io .* not found" # "msg": "failed to get vmSnapshot: VirtualMachineSnapshot.virtualization.deckhouse.io \"main-to-pr14969-ynv-0-ef17ba-20250908-142437\" not found"
  - "failed to sync virtual disk data source objectref: start immediate: internalvirtualizationdatavolumes.cdi.internal.virtualization.deckhouse.io .* is forbidden: unable to create new content in namespace .* because it is being terminated" # "err": "failed to sync virtual disk data source objectref: start immediate: internalvirtualizationdatavolumes.cdi.internal.virtualization.deckhouse.io \"vd-head-b3d8865-vd-root-migration-bios-d77ea313-f469-463d-a71b-00c89ca542ab\" is forbidden: unable to create new content in namespace head-b3d8865-end-to-end-vm-migration because it is being terminated"
  - "Failed to update lock optimistically:.*leases.*leader-election-helper.*" # error during virtualization-controller lifecycle: attempt to reacquire leader election. "msg": "Failed to update lock optimistically: Put \"http://127.0.0.1:23915/apis/coordination.k8s.io/v1/namespaces/d8-virtualization/leases/d8-virt-operator-leader-election-helper?timeout=5s\": context deadline exceeded (Client.Timeout exceeded while awaiting headers), falling back to slow path"
  - "Failed to update lock: .* leases.*leader-election-helper.*" # "msg": "ock: Operation cannot be fulfilled on leases.coordination.k8s.io \"d8-virt-operator-leader-election-helper\": the object has been modified; please apply your changes to the latest version and try again",
  - "failed to create VirtualMachineIPAddress .* the specified IP address .* has already been allocated and has not been released" #     "err": "failed to create VirtualMachineIPAddress \"head-5d2c558-vm-restore-safe-tfv4w\": admission webhook \"vmip.virtualization-controller.validate.d8-virtualization\" denied the request: the VirtualMachineIPAddress cannot be created: the specified IP address 10.66.10.4 has already been allocated and has not been released"
  - "error retrieving resource lock .*leader-election-helper" #  "msg": "error retrieving resource lock d8-virtualization/d8-virt-operator-leader-election-helper: context deadline exceeded",

cleanupResources:
  - clustervirtualimages.virtualization.deckhouse.io
  - virtualmachineclasses.virtualization.deckhouse.io
  - virtualmachineipaddressleases.virtualization.deckhouse.io
