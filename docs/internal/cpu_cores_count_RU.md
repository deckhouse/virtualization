# Количество ядер CPU

## Логика расчета количества сокетов и ядер

Для .spec.cpu.cores <= 16:

- Создается один сокет с количеством ядер, равным указанному значению.
- Шаг инкремента ядер: 1
- Допустимые значения: любое число от 1 до 16 включительно.

Для 16 < .spec.cpu.cores <= 32:

- Создается два сокета с одинаковым количеством ядер в каждом.
- Шаг инкремента ядер: 2
- Допустимые значения: 18, 20, 22, ..., 32.
- Минимум ядер в сокете: 9
- Максимум ядер в сокете: 16

Для 32 < .spec.cpu.cores <= 64:

- Создается четыре сокета с одинаковым количеством ядер в каждом.
- Шаг инкремента ядер: 4
- Допустимые значения: 36, 40, 44, ..., 64.
- Минимум ядер в сокете: 9
- Максимум ядер в сокете: 16

Для .spec.cpu.cores > 64:

- Создается восемь сокетов с одинаковым количеством ядер в каждом.
- Шаг инкремента ядер: 8
- Допустимые значения: 72, 80, ...
- Минимум ядер в сокете: 8

## Валидация значений

Валидация значений .spec.cpu.cores выполняется через вебхук.

## Отображение топологии ВМ

Текущая топология ВМ (реальное количество сокетов и ядер) отображается в статусе ВМ в следующем формате:

```yaml
status:
  resources:
    cpu:
      coreFraction: 100%
      cores: 18
      requestedCores: "18"
      runtimeOverhead: "0"
      topology:
        sockets: 2
        coresPerSocket: 9
```
