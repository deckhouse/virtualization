From c5e6c533f498a698ef6797f58f3f8aced62476fd Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Daniel=20P=2E=20Berrang=C3=A9?= <berrange@redhat.com>
Date: Wed, 3 Jul 2024 13:25:13 +0100
Subject: Remove upstream machine type versions for aarch64, s390x and x86_64
 architectures
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

The upstream versions will later be replaced by RHEL machine type
definitions.

Signed-off-by: Daniel P. Berrang√© <berrange@redhat.com>
Signed-off-by: Mirslav Rezanina <mrezanin@redhat.com>

Rebase notes (9.1.0 rc0)
 - Split off from downstream machine type addition patch
---
 hw/arm/virt.c              | 2 ++
 hw/i386/pc_piix.c          | 2 ++
 hw/i386/pc_q35.c           | 2 ++
 hw/ppc/spapr.c             | 5 +++++
 hw/s390x/s390-virtio-ccw.c | 2 ++
 5 files changed, 13 insertions(+)

diff --git a/hw/arm/virt.c b/hw/arm/virt.c
index b2aa3f1355..5396e7cb24 100644
--- a/hw/arm/virt.c
+++ b/hw/arm/virt.c
@@ -3306,6 +3306,7 @@ static void machvirt_machine_init(void)
 }
 type_init(machvirt_machine_init);
 
+#if 0 /* Disabled for Red Hat Enterprise Linux */
 static void virt_machine_9_1_options(MachineClass *mc)
 {
 }
@@ -3552,3 +3553,4 @@ static void virt_machine_2_6_options(MachineClass *mc)
     vmc->no_pmu = true;
 }
 DEFINE_VIRT_MACHINE(2, 6)
+#endif /* disabled for RHEL */
diff --git a/hw/i386/pc_piix.c b/hw/i386/pc_piix.c
index 347afa4c37..67107b174a 100644
--- a/hw/i386/pc_piix.c
+++ b/hw/i386/pc_piix.c
@@ -448,6 +448,7 @@ static void pc_i440fx_init(MachineState *machine)
 #define DEFINE_I440FX_MACHINE(major, minor) \
     DEFINE_PC_VER_MACHINE(pc_i440fx, "pc-i440fx", pc_i440fx_init, major, minor);
 
+#if 0 /* Disabled for Red Hat Enterprise Linux */
 static void pc_i440fx_machine_options(MachineClass *m)
 {
     PCMachineClass *pcmc = PC_MACHINE_CLASS(m);
@@ -775,6 +776,7 @@ static void pc_i440fx_machine_2_4_options(MachineClass *m)
 }
 
 DEFINE_I440FX_MACHINE(2, 4);
+#endif /* Disabled for Red Hat Enterprise Linux */
 
 #ifdef CONFIG_ISAPC
 static void isapc_machine_options(MachineClass *m)
diff --git a/hw/i386/pc_q35.c b/hw/i386/pc_q35.c
index f2d8edfa84..5fb283f2df 100644
--- a/hw/i386/pc_q35.c
+++ b/hw/i386/pc_q35.c
@@ -356,6 +356,7 @@ static void pc_q35_machine_options(MachineClass *m)
                      pc_q35_compat_defaults, pc_q35_compat_defaults_len);
 }
 
+#if 0 /* Disabled for Red Hat Enterprise Linux */
 static void pc_q35_machine_9_1_options(MachineClass *m)
 {
     pc_q35_machine_options(m);
@@ -668,3 +669,4 @@ static void pc_q35_machine_2_4_options(MachineClass *m)
 }
 
 DEFINE_Q35_MACHINE(2, 4);
+#endif /* Disabled for Red Hat Enterprise Linux */
diff --git a/hw/ppc/spapr.c b/hw/ppc/spapr.c
index 370d7c35d3..b48a2afc38 100644
--- a/hw/ppc/spapr.c
+++ b/hw/ppc/spapr.c
@@ -4837,6 +4837,7 @@ static void spapr_machine_latest_class_options(MachineClass *mc)
 #define DEFINE_SPAPR_MACHINE_TAGGED(major, minor, tag) \
     DEFINE_SPAPR_MACHINE_IMPL(false, major, minor, _, tag)
 
+#if 0 /* Disabled for Red Hat Enterprise Linux */
 /*
  * pseries-9.1
  */
@@ -5041,6 +5042,7 @@ static void spapr_machine_4_1_class_options(MachineClass *mc)
 }
 
 DEFINE_SPAPR_MACHINE(4, 1);
+#endif /* disabled for RHEL */
 
 /*
  * pseries-4.0
@@ -5056,6 +5058,8 @@ static bool phb_placement_4_0(SpaprMachineState *spapr, uint32_t index,
     }
     return true;
 }
+
+#if 0 /* Disabled for Red Hat Enterprise Linux */
 static void spapr_machine_4_0_class_options(MachineClass *mc)
 {
     SpaprMachineClass *smc = SPAPR_MACHINE_CLASS(mc);
@@ -5380,6 +5384,7 @@ static void spapr_machine_2_1_class_options(MachineClass *mc)
     compat_props_add(mc->compat_props, hw_compat_2_1, hw_compat_2_1_len);
 }
 DEFINE_SPAPR_MACHINE(2, 1);
+#endif /* disabled for RHEL */
 
 static void spapr_machine_register_types(void)
 {
diff --git a/hw/s390x/s390-virtio-ccw.c b/hw/s390x/s390-virtio-ccw.c
index c483ff8064..86bfc9d2eb 100644
--- a/hw/s390x/s390-virtio-ccw.c
+++ b/hw/s390x/s390-virtio-ccw.c
@@ -871,6 +871,7 @@ static const TypeInfo ccw_machine_info = {
     DEFINE_CCW_MACHINE_IMPL(false, major, minor)
 
 
+#if 0 /* Disabled for Red Hat Enterprise Linux */
 static void ccw_machine_9_1_instance_options(MachineState *machine)
 {
 }
@@ -1305,6 +1306,7 @@ static void ccw_machine_2_4_class_options(MachineClass *mc)
 DEFINE_CCW_MACHINE(2, 4);
 
 #endif
+#endif /* disabled for RHEL */
 
 static void ccw_machine_register_types(void)
 {
-- 
2.39.3

