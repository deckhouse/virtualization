---
image: {{ $.ImageName }}
from: {{ .Images.DISTROLESS_ALT_P11 }}
# from: {{ .Images.BASE_SCRATCH }}
import:
- image: virt-artifact-classic-go
  add: /kubevirt-binaries/
  to: /usr/bin
  includePaths:
  - virt-api
  before: setup
- image: virt-artifact-classic-go
  add: /kubevirt/cmd/virt-launcher/
  to: /etc
  includePaths:
  - passwd
  - group
  before: setup
- image: virt-artifact-classic-go
  add: /kubevirt/
  to: /
  includePaths:
  - .version
  after: setup
# Source https://github.com/kubevirt/kubevirt/blob/main/cmd/virt-api/BUILD.bazel
docker:
  ENTRYPOINT: ["/usr/bin/virt-api"]
  USER: 1001
# ========================
# image: {{ $.ImageName }}
# from: {{ .Images.BASE_SCRATCH }}
# import:
# - image: virt-artifact
#   add: /images/kubevirt/{{ $.ImageName }}:latest
#   excludePaths:
#   - 'sys'
#   to: /
#   before: setup
# # Source https://github.com/kubevirt/kubevirt/blob/main/cmd/virt-api/BUILD.bazel
# docker:
#   ENTRYPOINT: ["/usr/bin/virt-api"]
#   USER: 1001
